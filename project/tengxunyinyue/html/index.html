<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>腾讯音乐</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no">
<link href="../resource/css/style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="index">
        <div class="star"></div>
        <div class="star pink-1"></div>
        <div class="star pink-2"></div>
        <div class="star pink-3"></div>
        <div class="star pink-4"></div>
        <div class="star pink-5"></div>
        <div class="bg-index">
            <img src="../resource/img/bg.png" alt="">
            <i class="icon-kugo"></i>
            <i class="icon-quanmin"></i>
            <i class="icon-qq"></i>
            <i class="icon-kuwo"></i>
        </div>
        <a href="javascript:;" class="btn-gift">我的奖励</a>
        <div class="rule-box" id="move">
            <div class="art-rule">活动规则</div>
        </div>
        <div class="container">
            <div class="type">
                <div class="type-item type-1">
                    <i class="note-1 slide-vertical"></i>
                    <i class="note-2 slide-vertical-delay"></i>
                </div>
                <i class="add"></i>
                <div class="type-item type-2">
                    <i class="coin slide-level"></i>
                </div>
            </div>
            <div class="lottery-box">
                <p class="lottery-title">美股免佣100%中奖</p>
                <div id="luck">
                    <ul class="box-list">
                        <li class="luck-unit luck-unit-0">
                            <i></i>
                            <p><span>30</span>天</p>
                        </li>
                        <li class="luck-unit luck-unit-1">
                            <i></i>
                            <p><span>7</span>天</p>
                        </li>
                        <li class="luck-unit luck-unit-2">
                            <i></i>
                            <p><span>45</span>天</p>
                        </li>
                    </ul>
                    <ul class="box-list">
                        <li class="luck-unit luck-unit-7">
                            <i></i>
                            <p><span>360</span>天</p>
                        </li>
                        <li class="lottery-btn">
                        </li>
                        <li class="luck-unit luck-unit-3">
                            <i></i>
                            <p><span>90</span>天</p>
                        </li>
                    </ul>
                    <ul class="box-list">
                        <li class="luck-unit luck-unit-6">
                            <i></i>
                            <p><b>永久免佣</b></p>
                        </li>
                        <li class="luck-unit luck-unit-5">
                            <i></i>
                            <p><span>15</span>天</p>
                        </li>
                        <li class="luck-unit luck-unit-4">
                            <i></i>
                            <p><span>120</span>天</p>
                        </li>
                    </ul>
                </div>
                <div class="lottery-info">
                    <ul>
                        <li>恭喜张**获得美股免佣360天</li>
                        <li>恭喜李**获得美股免佣360天</li>
                        <li>恭喜赵**获得美股免佣360天</li>
                        <li>恭喜张**获得美股免佣360天</li>
                        <li>恭喜李**获得美股免佣360天</li>
                        <li>恭喜赵**获得美股免佣360天</li>
                    </ul>
                </div>
            </div>
            <div class="gift-box">
                <p class="lottery-title">首次转股送腾讯音乐股票</p>
                <ul class="gift-ul">
                    <li class="gift-title">
                        <div>
                            <p>首次转股金额</p>
                            <p>(美元)</p>
                        </div>
                        <div>
                            <p>奖励</p>
                            <p>(美股免佣+腾讯音乐股票)</p>
                        </div>
                    </li>
                    <li class="gift-item">
                        <p>US$5,000-50,000</p>
                        <p>15天+2股</p>
                    </li>
                    <li class="gift-item">
                        <p>US$50,001-1,00,000</p>
                        <p>30天+4股</p>
                    </li>
                    <li class="gift-item">
                        <p>US$1,00,001-5,00,000</p>
                        <p>60天+8股</p>
                    </li>
                    <li class="gift-item">
                        <p>US$5,00,001及以上</p>
                        <p>120天+10股</p>
                    </li>
                </ul>
                <a href="javascript:;" class="btn-box">立即转股</a>
            </div>
            <div class="zhuangu-box">
                <ul class="zhuangu-ul">
                    <li>
                        <i class="icon-phone"></i>     
                        <p>东方财富APP</p>
                        <p>点击<span>交易-股票转入</span>提交申请</p>
                    </li>
                    <li>
                        <i class="icon-document"></i>
                        <p>填写转股表格</p>
                        <p>通知对方券商转出股票</p>
                    </li>
                </ul>
                <a href="javascript:;" class="btn-box">点击查看转股指引</a>
            </div>
            <div class="select-box">
                <ul class="select-ul">
                    <li>
                        <div>
                            <p>1&nbsp;&nbsp;一个账户同步港美</p>
                            <p>1分钟线上开户，操作简单智能</p>
                            <p>无资金门槛，轻松投资全球</p>
                        </div>
                        <i class="select-1"></i>
                    </li>
                    <li>
                        <div>
                            <p>2&nbsp;&nbsp;交易佣金收费低</p>
                            <p>港股仅收15港元/笔，无资金限制</p>
                            <p>美股收费低至0.0099美元/股</p>
                        </div>
                        <i class="select-2"></i>
                    </li>
                    <li>
                        <div>
                            <p>3&nbsp;&nbsp;极速行情免费看</p>
                            <p>实时行情，毫秒级专线连接</p>
                            <p>APP/PC端全支持</p>
                        </div>
                        <i class="select-3"></i>
                    </li>
                    <li>
                        <div>
                            <p>4&nbsp;&nbsp;全球投资一站式</p>
                            <p>资讯动态、大V观点实时推送</p>
                            <p>股票、ETF、窝轮多品种交易</p>
                        </div>
                        <i class="select-4"></i>
                    </li>
                    <li>
                        <div>
                            <p>5&nbsp;&nbsp;品牌保障安全放心</p>
                            <p>东方财富旗下港美股投资平台</p>
                            <p>香港证监会持牌法团</p>
                        </div>
                        <i class="select-5"></i>
                    </li>
                    <li>
                        <div>
                            <p>6&nbsp;&nbsp;极致服务</p>
                            <p>365*24小时全年无休</p>
                            <p>人工中文客服在线</p>
                        </div>
                        <i class="select-6"></i>
                    </li>
                </ul>
            </div>
        </div>
        <div class="modal-mask"></div>
        <div class="modal-container modal-kaihu">
            <div class="modal-content">
                <div class="modal-title">温馨提示</div>
                <p class="modal-info info-line-1">完成开户后才可获得转股奖励权限</p>
                <p class="modal-info info-line-2">先去开户吧</p>
                <a href="javascript:;" class="btn-modal">0门槛开户</a>
            </div>
            <div class="modal-close"></div>
        </div>
        <div class="modal-container modal-rule">
            <div class="modal-content modal-flex">
                <div class="modal-title">活动规则</div>
                <div class="rule-container">
                    <p><span>活动时间：</span>2018年10月18日-2018年11月30日</p>
                    <p><span>活动对象：</span>大陆地区用户</p>
                    <p><span>活动说明：</span></p>
                    <p>1.未开户用户自动有1次抽奖机会获取美股免佣，同时邀请好友开户可获得额外抽奖机会。</p>
                    <p>2.已开户用户通过活动页邀请1个好友开户成功即可获得1次抽奖机会，多邀多得。</p>
                    <p>3.活动期间发起从其他券商转入股票到东财国际证券，并在活动结束日之前到账，根据转股市值均可获得对应美股免佣+腾讯音乐股票奖励，从活动页面和其他途径发起转股均可。</p>
                    <p>4.支持转入任何股票，只需市值达到活动奖励领取门槛即可，按股票到账当日的收盘价格计算股票市值。</p>
                    <p><span>奖励说明：</span></p>
                    <p>1.点击活动页面的“我的奖励”领取对应奖励。</p>
                    <p>2.美股免佣：提交领取后，工作人员将在T+1个工作日内为您发放。</p>
                    <p>3.腾讯音乐股票：提交领取后，工作人员将在T+7个工作日内为您发放，可在个人交易账户查看并交易。</p>
                    <p><span>其他说明：</span></p>
                    <p>1.不同市场股票的汇率兑换标准：1USD=7.75HKD</p>
                    <p>2.本活动股票奖励由东方财富国际证券提供，与腾讯音乐公司没有任何关系。</p>
                    <p>3.美股免佣奖励仅免除交易佣金部分，不包括平台使用费。</p>
                    <p>4.此活动不与其他转仓奖励共享，如有疑问可咨询客服：<a href="tel:4009201822">4009201822</a></p>
                    <p>5.本活动最终解释权归东方财富网所有。<a href="javascript:;">《免责声明》</a></p>
                </div>
            </div>
            <div class="modal-close"></div>
        </div>
        <div class="modal-container modal-reward">
            <div class="modal-content">
                <div class="modal-title">温馨提示</div>
                <p class="modal-info info-line-1">恭喜您获得X天美股免佣</p>
                <p class="modal-info info-line-2">首次转股，获取腾讯音乐股票</p>
                <a href="javascript:;" class="btn-modal">前往转股领腾讯音乐</a>
                <a href="javascript:;" class="btn-modal btn-modal-second">算了，再看看</a>
            </div>
            <div class="modal-close"></div>
        </div>
        <div class="modal-container modal-phone">
            <div class="modal-content modal-content-large">
                <div class="modal-title-double">
                    <p>输入手机号</p>
                    <p>发起转股</p>
                </div>
                <div class="phone-box">
                    <div class="telbox box">
                        <i></i>
                        <input id="telNumber" type="tel" maxlength="11" onkeyup="this.value=this.value.replace(/\D/g,'')" placeholder="请输入您的手机号码">
                    </div>
                    <div class="picbox box">
                        <i></i>
                        <input id="graphCode" maxlength="4" type="tel" placeholder="请输入图形验证码">
                        <div class="yzmimg">
                            <img id="vCodeImage" src="../resource/img/code-img.png">
                        </div>
                        <a id="refreshImage" class="change-img"></a>
                    </div>
                    <div class="yzmbox box">
                        <i></i>
                        <input id="messageVCode" onkeyup="this.value=this.value.replace(/\D/g,'')" type="number" maxlength="4" placeholder="请输入短信验证码">
                        <a id="sendMessage" class="get-code btnRight-gray" href="javascript:;">获取验证码</a>
                    </div>
                    <div class="warning">
                        <p class="voice" id="messageTip">图形验证码不正确</p>
                    </div>
                    <a href="javascript:;" class="btn btn-modal btn-margin" id="submitApplication">立即开户</a>
                </div>
            </div>
            <div class="modal-close"></div>
        </div>
    </div>
    <script src="../resource/js/zepto.min.js"></script>
    <script>
        //定义一个方法并执行
        (function(doc, win) {
            var docEl = doc.documentElement;
            resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize';
            var recalc = function() {
                var clientWidth = docEl.clientWidth;
                if(!clientWidth) return;
                docEl.style.fontSize = 10 * ((clientWidth >= 750 ? 750 : clientWidth) / 375) + 'px';
            };
            if(!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
        var timer=null;
        function startMove(element, iTarget) {
            clearInterval(timer);
            timer = setInterval(function () {
                //因为速度要动态改变，所以必须放在定时器中
                var iSpeed = (iTarget - element.offsetTop) / 8; //(目标值-当前值)/缩放系数=速度
                iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed); //速度取整
                if (element.offsetTop === iTarget) {//结束运动
                    clearInterval(timer);
                } else {
                    element.style.top = element.offsetTop + iSpeed + "px";
                }
            }, 30);
        }
        var targetY=0;
        var move=document.getElementById("move");
        window.onscroll = function(e) {
            var e = e || window.event;
            var scrolltop = document.documentElement.scrollTop || document.body.scrollTop;
            targetY=scrolltop+160;
            /*console.log(targetY);*/
            startMove(move,targetY);
        };
        $(document).ready(function() {
            $('.lottery-btn').click(function() {
                var item = $(this)
                if (item.hasClass('lottery-btn-press')) {
                    item.removeClass('lottery-btn-press')
                } else {
                    item.addClass('lottery-btn-press')
                }
            })
        })
        // 抽奖
        var luck={
			index:0,	//当前转动到哪个位置，起点位置
			count:0,	//总共有多少个位置
			timer:0,	//setTimeout的ID，用clearTimeout清除
			speed:20,	//初始转动速度
			times:0,	//转动次数
			cycle:50,	//转动基本次数：即至少需要转动多少次再进入抽奖环节
			prize:-1,	//中奖位置
			init:function(id){
                console.log(id)
				if ($("#"+id).find(".luck-unit").length>0) {
                    console.log('init')
					$luck = $("#"+id);
					$units = $luck.find(".luck-unit");
                    console.log($units)
					this.obj = $luck;
					this.count = $units.length;
					// $luck.find(".luck-unit-"+this.index).addClass("active");
				};
			},

			
			roll:function(){
				var index = this.index;
				var count = this.count;
				var luck = this.obj;
				// $(luck).find(".luck-unit-"+index).removeClass("active");
                var item = $('<div class="lottery-mask"></div>')
                $('.lottery-mask').remove()
				$(luck).find(".luck-unit-"+index).append(item)
				index += 1;
				if (index>count-1) {
					index = 0;
				};
				// $(luck).find(".luck-unit-"+index).find('.lottery-mask').empty()
				this.index=index;
				return false;
			},
			stop:function(index){
				this.prize=index;
				return false;
			}
		};


		function roll(){
			luck.times += 1;
			luck.roll();
			if (luck.times > luck.cycle+10 && luck.prize==luck.index) {
				clearTimeout(luck.timer);
				luck.prize=-1;
				luck.times=0;
				click=false;
			}else{
				if (luck.times<luck.cycle) {
					luck.speed -= 10;
				}else if(luck.times==luck.cycle) {
					var index = Math.random()*(luck.count)|0;
					console.log(index)
                    // if(index>5){
                    //     index = 7;
					// }else {
                    //     index = 5;
					// }
					// index = 1
                    luck.prize = index;//最终中奖位置
				}else{
					if (luck.times > luck.cycle+10 && ((luck.prize==0 && luck.index==7) || luck.prize==luck.index+1)) {
						luck.speed += 110;
					}else{
						luck.speed += 20;
					}
				}
				if (luck.speed<40) {
					luck.speed=40;
				};

				luck.timer = setTimeout(roll,luck.speed);
			}
			return false;
		}


		var click=false;
		window.onload=function(){
            console.log('a')
			luck.init('luck');
			$(".lottery-btn").click(function(){
				//按下弹起效果
				$(".lottery-btn").addClass("lottery-btn-press");
				setTimeout(function(){	
					$(".lottery-btn").removeClass("lottery-btn-press");
				},4500);

				
				if(click) {
					return false;
				}
				else{
					luck.speed=100;
					roll();
					click=true;
					return false;
				}

			});
            $('.modal-mask').on('touchstart', function(e) {
                e.preventDefault()
            })
            $('.art-rule').click(function() {
                $('.modal-mask').show();
                $('.modal-rule').show().addClass('container-ani');
            })
            $('.modal-close').click(function() {
                $('.modal-mask').hide();
                $('.modal-container').hide().removeClass('container-ani');
            })
            scrollTopA($('.lottery-info'))
		};
        // 向上跑马灯
        function scrollTopA($obj) {
            var $child=$obj.children().clone();
            $obj.append($child);
            var initTop=0;
            var timer=null;
            clearInterval(timer);
            timer=setInterval(function () {
                initTop=$obj.scrollTop();
                initTop++;
                /*console.log(initTop);
                console.log($child.height());*/
                if(initTop>=$child.height()){
                    initTop-=$child.height();
                }
                $obj.scrollTop(initTop);
            },90);    
        }
    </script>
</body>
</html>
